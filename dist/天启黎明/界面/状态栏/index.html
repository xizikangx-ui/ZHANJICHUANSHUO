<head><script type="module">import{waitUntil as e}from'https://testingcf.jsdelivr.net/npm/async-wait-until/+esm';import{createPinia as t,defineStore as r}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';var l={667(e,t){t.A=(e,t)=>{const r=e.__vccOpts||e;for(const[e,l]of t)r[e]=l;return r}}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return l[e](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const o=Vue,c=_;var u=a.n(c);function s(e){return!!(0,o.getCurrentScope)()&&((0,o.onScopeDispose)(e),!0)}const i='undefined'!=typeof window&&'undefined'!=typeof document,m=('undefined'!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope),Object.prototype.toString),p=e=>'[object Object]'===m.call(e),f=()=>{};function d(...e){if(1!==e.length)return(0,o.toRef)(...e);const t=e[0];return'function'==typeof t?(0,o.readonly)((0,o.customRef)(()=>({get:t,set:f}))):(0,o.ref)(t)}function v(e,t){return function(...r){return new Promise((l,n)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(l).catch(n)})}}const g=e=>e();function b(e){return Array.isArray(e)?e:[e]}function y(e){const t=Object.create(null);return r=>t[r]||(t[r]=e(r))}const E=/\B([A-Z])/g,k=(y(e=>e.replace(E,'-$1').toLowerCase()),/-(\w)/g);y(e=>e.replace(k,(_,e)=>e?e.toUpperCase():''));function N(e){return e||(0,o.getCurrentInstance)()}function V(e,t,r={}){const{eventFilter:l=g,...n}=r;return(0,o.watch)(e,v(l,t),n)}function D(e,t,r={}){const{eventFilter:l,initialState:n='active',...a}=r,{eventFilter:c,pause:u,resume:s,isActive:i}=function(e=g,t={}){const{initialState:r='active'}=t,l=d('active'===r);return{isActive:(0,o.readonly)(l),pause:function(){l.value=!1},resume:function(){l.value=!0},eventFilter:(...t)=>{l.value&&e(...t)}}}(l,{initialState:n});return{stop:V(e,t,{...a,eventFilter:c}),pause:u,resume:s,isActive:i}}function S(e,t=1e3,r={}){const{immediate:l=!0,immediateCallback:n=!1}=r;let a=null;const c=(0,o.shallowRef)(!1);function u(){a&&(clearInterval(a),a=null)}function m(){c.value=!1,u()}function p(){const r=(0,o.toValue)(t);r<=0||(c.value=!0,n&&e(),u(),c.value&&(a=setInterval(e,r)))}if(l&&i&&p(),(0,o.isRef)(t)||'function'==typeof t){s((0,o.watch)(t,()=>{c.value&&i&&p()}))}return s(m),{isActive:(0,o.shallowReadonly)(c),pause:m,resume:p}}function B(e,t,r={}){const{eventFilter:l=g,...n}=r,a=v(l,t);let c,u,s;if('sync'===n.flush){let t=!1;u=()=>{},c=e=>{t=!0,e(),t=!1},s=(0,o.watch)(e,(...e)=>{t||a(...e)},n)}else{const t=[];let r=0,l=0;u=()=>{r=l},t.push((0,o.watch)(e,()=>{l++},{...n,flush:'sync'})),c=e=>{const t=l;e(),r+=l-t},t.push((0,o.watch)(e,(...e)=>{const t=r>0&&r===l;r=0,l=0,t||a(...e)},n)),s=()=>{t.forEach(e=>e())}}return{stop:s,ignoreUpdates:c,ignorePrevAsyncUpdates:u}}const h=z,C=h.z.object({界面:h.z.object({建卡:h.z.object({已开始:h.z.boolean().prefault(!1),角色姓名:h.z.string().prefault(''),职业:h.z.enum(['指挥官','战姬','权柄使役者']).prefault('指挥官'),战姬类型:h.z.enum(['侦察型','轻型','中型','重型','要塞型','地面支援姬']).prefault('轻型'),年龄:h.z.coerce.number().transform(e=>_.clamp(e,12,80)).prefault(21),作弊模式:h.z.boolean().prefault(!1)}).prefault({}),楼层文本:h.z.object({正文:h.z.string().prefault(''),原文:h.z.string().prefault(''),更新时间:h.z.coerce.number().prefault(0)}).prefault({}),在场角色:h.z.array(h.z.object({姓名:h.z.string().prefault('未命名'),好感度:h.z.coerce.number().transform(e=>_.clamp(e,-200,1e3)).prefault(0),态度:h.z.string().prefault('中立'),内心想法:h.z.string().prefault(''),基础属性:h.z.record(h.z.string().describe('属性名'),h.z.coerce.number().prefault(0)).prefault({}),更新时间:h.z.coerce.number().prefault(0)}).prefault({})).prefault([]),模块折叠:h.z.object({在场角色:h.z.boolean().prefault(!1),长期NPC:h.z.boolean().prefault(!1)}).prefault({}),游戏结束:h.z.object({已结束:h.z.boolean().prefault(!1),原因:h.z.string().prefault(''),时间戳:h.z.coerce.number().prefault(0)}).prefault({}),空战反馈:h.z.object({待反馈:h.z.boolean().prefault(!1),摘要:h.z.string().prefault(''),时间戳:h.z.coerce.number().prefault(0)}).prefault({})}).prefault({}),世界:h.z.object({当前时间:h.z.string().prefault('联合纪年177年8月28日 08:00'),当前地点:h.z.string().prefault('联合第六集团军 卡尔斯空港城'),天气:h.z.string().prefault('阴，低能见度'),战区威胁等级:h.z.enum(['低','中','高','极危']).prefault('中'),近期事务:h.z.record(h.z.string().describe('事务名'),h.z.string().describe('事务描述')).prefault({}),长期NPC列表:h.z.record(h.z.string().describe('NPC姓名'),h.z.object({姓名:h.z.string().prefault('未命名'),好感度:h.z.coerce.number().transform(e=>_.clamp(e,-200,1e3)).prefault(0),好感阶段:h.z.enum(['死敌','危险','警惕','熟悉','朋友','挚友','亲密','伴侣']).prefault('警惕'),态度:h.z.string().prefault('中立'),内心想法:h.z.string().prefault(''),基础属性:h.z.record(h.z.string().describe('属性名'),h.z.coerce.number().prefault(0)).prefault({}),性行为次数:h.z.coerce.number().transform(e=>_.clamp(e,0,99999)).prefault(0),贞洁状态:h.z.enum(['处女','非处女']).prefault('处女'),关系标签:h.z.array(h.z.string()).prefault([]),首次记录时间:h.z.coerce.number().prefault(0),最后更新时间:h.z.coerce.number().prefault(0)}).prefault({})).prefault({}),NPC关系追踪:h.z.record(h.z.string().describe('NPC姓名'),h.z.object({连续出现计数:h.z.coerce.number().transform(e=>_.clamp(e,0,9999)).prefault(0),最近出现轮次:h.z.coerce.number().transform(e=>_.clamp(e,0,999999)).prefault(0),玩家随行请求命中次数:h.z.coerce.number().transform(e=>_.clamp(e,0,9999)).prefault(0),最近玩家请求时间:h.z.coerce.number().prefault(0),是否已转长期:h.z.boolean().prefault(!1)}).prefault({})).prefault({})}).prefault({}),主角:h.z.object({档案:h.z.object({代号:h.z.string().prefault('待命战姬'),阵营:h.z.string().prefault('战姬武装部'),职阶:h.z.string().prefault('预备役'),身份路径:h.z.string().prefault('轻型战姬')}).prefault({}),人类属性:h.z.object({力量:h.z.coerce.number().transform(e=>_.clamp(e,0,5)).prefault(1),敏捷:h.z.coerce.number().transform(e=>_.clamp(e,0,5)).prefault(1),体质:h.z.coerce.number().transform(e=>_.clamp(e,0,5)).prefault(1),感知:h.z.coerce.number().transform(e=>_.clamp(e,0,5)).prefault(1),意志:h.z.coerce.number().transform(e=>_.clamp(e,0,5)).prefault(1),魅力:h.z.coerce.number().transform(e=>_.clamp(e,0,5)).prefault(1),学识:h.z.coerce.number().transform(e=>_.clamp(e,0,5)).prefault(1)}).prefault({}),锻炼:h.z.object({力量:h.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0),敏捷:h.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0),体质:h.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0),感知:h.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0),意志:h.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0),魅力:h.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0),学识:h.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0)}).prefault({}),属性:h.z.object({魔力评级:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(20),力量加成:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(18),体质加成:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(18),抗污染值:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(18),飞行速度:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(20),防御评级:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(12)}).prefault({}),成长:h.z.object({战姬老练等级:h.z.coerce.number().transform(e=>_.clamp(e,1,20)).prefault(1),权柄使役者等级:h.z.coerce.number().transform(e=>_.clamp(e,1,20)).prefault(1),魔力碎片:h.z.coerce.number().transform(e=>_.clamp(e,0,999999)).prefault(0),下一级所需魔力碎片:h.z.coerce.number().transform(e=>_.clamp(e,0,999999)).prefault(10),权柄碎片:h.z.coerce.number().transform(e=>_.clamp(e,0,999999)).prefault(0),权柄本源:h.z.boolean().prefault(!1)}).prefault({}),灵装化:h.z.object({启用:h.z.boolean().prefault(!1),手动切换:h.z.boolean().prefault(!1),灵装模式:h.z.enum(['待机','标准','过载']).prefault('标准'),每回合耗魔:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(8),每回合耗槽:h.z.coerce.number().transform(e=>_.clamp(e,0,9)).prefault(1),上次结算轮次:h.z.coerce.number().transform(e=>_.clamp(e,0,9999)).prefault(0)}).prefault({}),资源:h.z.object({当前生命:h.z.coerce.number().transform(e=>_.clamp(e,0,9999)).prefault(100),最大生命:h.z.coerce.number().transform(e=>_.clamp(e,1,9999)).prefault(100),当前魔力:h.z.coerce.number().transform(e=>_.clamp(e,0,9999)).prefault(100),最大魔力:h.z.coerce.number().transform(e=>_.clamp(e,1,9999)).prefault(100),污染值:h.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0),行动点:h.z.coerce.number().transform(e=>_.clamp(e,0,9)).prefault(1),移动点:h.z.coerce.number().transform(e=>_.clamp(e,0,9)).prefault(1),灵装槽当前:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(10),灵装槽上限:h.z.coerce.number().transform(e=>_.clamp(e,1,99)).prefault(10)}).prefault({}),基础能力:h.z.object({已选:h.z.array(h.z.string()).prefault([])}).prefault({}),技能树:h.z.object({可用技能点:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(4),已用技能点:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),已解锁:h.z.record(h.z.string().describe('节点ID'),h.z.boolean()).prefault({}),自定义:h.z.string().prefault('')}).prefault({}),权柄:h.z.object({权柄名称:h.z.string().prefault(''),权柄途径:h.z.enum(['生命','历史','群星','黎明','黑夜','力量','希望','勇气','梦想']).prefault('生命'),碎片数:h.z.coerce.number().transform(e=>_.clamp(e,0,99999)).prefault(0),赋予技能:h.z.string().prefault(''),审核通过:h.z.boolean().prefault(!1),审核备注:h.z.string().prefault('')}).prefault({}),背景:h.z.object({原文:h.z.string().prefault(''),摘要:h.z.string().prefault('')}).prefault({}),战术:h.z.object({战斗模式:h.z.enum(['非战斗','空战','地面战']).prefault('非战斗'),是否战斗中:h.z.boolean().prefault(!1),当前阵线:h.z.enum(['后卫','中线','前线','交锋区']).prefault('中线'),制空权:h.z.enum(['我方','敌方','争夺中']).prefault('争夺中'),当前轮次:h.z.coerce.number().transform(e=>_.clamp(e,1,999)).prefault(1),重型移动计数:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),火力惩罚:h.z.string().prefault('无'),词条区:h.z.record(h.z.string().describe('单位名'),h.z.array(h.z.string()).prefault([])).prefault({}),空战:h.z.object({菜单开启:h.z.boolean().prefault(!1),流程阶段:h.z.enum(['遭遇','行动点计算','站位划分','制空判定','行动序列','回合执行','空战结算']).prefault('遭遇'),天气:h.z.enum(['万里无云','天气晴朗','阴雨连绵','雷暴雨天','台风天']).prefault('天气晴朗'),天气判定值:h.z.coerce.number().transform(e=>_.clamp(e,1,100)).prefault(11),天气命中修正:h.z.coerce.number().transform(e=>_.clamp(e,-50,50)).prefault(5),天气探测修正:h.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),天气移速倍率:h.z.coerce.number().transform(e=>_.clamp(e,.1,3)).prefault(1),空域层:h.z.enum(['湍流层','云层','高空','标准空域','低空','地面']).prefault('标准空域'),格距米:h.z.coerce.number().transform(e=>_.clamp(e,100,2e3)).prefault(500),我方单位:h.z.object({侦察型:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0),轻型:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0),中型:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0),重型:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0),要塞型:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0),其他:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0)}).prefault({}),敌方单位:h.z.object({侦察型:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0),轻型:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0),中型:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0),重型:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0),要塞型:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0),其他:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(0)}).prefault({}),我方制空点:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),敌方制空点:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),制空修正:h.z.coerce.number().transform(e=>_.clamp(e,-1,1)).prefault(0),重武器命中条件:h.z.string().prefault('无'),触发突袭轮:h.z.boolean().prefault(!1),突袭来源:h.z.string().prefault('无'),当前行动序列:h.z.array(h.z.string()).prefault([]),台风眼格:h.z.array(h.z.string()).prefault([]),侦查单位类型:h.z.enum(['侦察型','轻型','中型','重型及以上']).prefault('侦察型'),侦查目标类型:h.z.enum(['侦察型','轻型','中型','重型','要塞']).prefault('轻型'),侦查结果:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),目标隐匿剩余:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),我方闪避值:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(3),敌方闪避值:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(3),我方近失叠加命中:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),敌方近失叠加命中:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),最近命中详情:h.z.string().prefault(''),我方总耐久:h.z.coerce.number().transform(e=>_.clamp(e,0,99999)).prefault(100),敌方总耐久:h.z.coerce.number().transform(e=>_.clamp(e,0,99999)).prefault(100),已结算回合:h.z.coerce.number().transform(e=>_.clamp(e,0,9999)).prefault(0),最近结算摘要:h.z.string().prefault('')}).prefault({})}).prefault({}),装备:h.z.object({灵装:h.z.string().prefault('联合标准轻型灵装'),武器:h.z.record(h.z.string().describe('武器名'),h.z.object({等级:h.z.coerce.number().transform(e=>_.clamp(e,0,8)).prefault(1),射程:h.z.coerce.number().transform(e=>_.clamp(e,0,8)).prefault(2),描述:h.z.string().prefault('制式武器')}).prefault({})).prefault({}),防具:h.z.record(h.z.string().describe('防具部位'),h.z.string()).prefault({}),特殊配件:h.z.record(h.z.string().describe('配件名'),h.z.string().describe('效果描述')).prefault({})}).prefault({}),异常状态:h.z.record(h.z.string().describe('状态名'),h.z.object({等级:h.z.enum(['严重','致命','快速致命']).prefault('严重'),效果:h.z.string().prefault('暂无效果描述'),剩余轮次:h.z.coerce.number().transform(e=>_.clamp(e,0,99)).prefault(1)}).prefault({})).prefault({}),技能检定:h.z.object({最近动作:h.z.string().prefault('无'),关联属性:h.z.enum(['力量','敏捷','体质','感知','意志','魅力','学识','无']).prefault('无'),原始骰点:h.z.coerce.number().transform(e=>_.clamp(e,1,10)).prefault(1),属性加值:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),难度减值:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),难度说明:h.z.string().prefault('常规难度'),总值:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),结果:h.z.enum(['大成功','成功','失败','大失败']).prefault('失败'),结果描述:h.z.string().prefault('暂无检定'),封锁行为:h.z.string().prefault(''),封锁至轮次:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),更新时间:h.z.coerce.number().prefault(0)}).prefault({})}).prefault({}),战利品:h.z.object({显示战利品:h.z.boolean().prefault(!1),当前容器:h.z.record(h.z.string().describe('容器名'),h.z.object({类型:h.z.enum(['普通','高级']).prefault('普通'),已开启:h.z.boolean().prefault(!1)}).prefault({})).prefault({}),最近获取:h.z.record(h.z.string().describe('物品名'),h.z.object({品质:h.z.enum(['通用','良好','优秀','机密','实验','收藏']).prefault('通用'),数量:h.z.coerce.number().transform(e=>_.clamp(e,1,999)).prefault(1),价值:h.z.coerce.number().transform(e=>_.clamp(e,1,999999999)).prefault(1)}).prefault({})).prefault({}),副本:h.z.object({已激活:h.z.boolean().prefault(!1),副本名称:h.z.string().prefault(''),实验室等级:h.z.enum(['基础实验室','被封锁的实验室','被封锁的机密实验室','被封锁的顶点实验室']).prefault('基础实验室'),地图规模:h.z.enum(['小型','中型','大型']).prefault('小型'),房间总数:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),当前房间索引:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),已探索房间:h.z.coerce.number().transform(e=>_.clamp(e,0,999)).prefault(0),最近房间:h.z.string().prefault(''),最近结算:h.z.string().prefault(''),房间列表:h.z.array(h.z.object({序号:h.z.coerce.number().transform(e=>_.clamp(e,1,999)).prefault(1),房间名:h.z.string().prefault(''),房间类型:h.z.enum(['一般','不错','危险','隐藏']).prefault('一般'),容器:h.z.object({普通:h.z.coerce.number().transform(e=>_.clamp(e,0,9)).prefault(0),高级:h.z.coerce.number().transform(e=>_.clamp(e,0,9)).prefault(0),上锁:h.z.boolean().prefault(!1),已搜索:h.z.boolean().prefault(!1)}).prefault({})}).prefault({})).prefault([])}).prefault({}),仓库:h.z.object({联合币:h.z.coerce.number().transform(e=>_.clamp(e,0,99999999)).prefault(0),芯片:h.z.coerce.number().transform(e=>_.clamp(e,0,999999)).prefault(0),物品:h.z.record(h.z.string().describe('物品名'),h.z.object({品质:h.z.enum(['通用','良好','优秀','机密','实验','收藏']).prefault('通用'),数量:h.z.coerce.number().transform(e=>_.clamp(e,0,999999)).prefault(0),价值:h.z.coerce.number().transform(e=>_.clamp(e,1,999999999)).prefault(1),分类:h.z.string().prefault('杂项'),描述:h.z.string().prefault(''),词条:h.z.array(h.z.string()).prefault([]),可交易:h.z.boolean().prefault(!0)}).prefault({})).prefault({}),独特收藏品:h.z.array(h.z.string()).prefault([])}).prefault({})}).prefault({}),战场日志:h.z.record(h.z.string().describe('日志标题'),h.z.string().describe('日志内容')).prefault({})}).prefault({}),w=(j=C,'message'!==(q={type:'message',message_id:getCurrentMessageId()}).type||void 0!==q.message_id&&'latest'!==q.message_id||(q.message_id=-1),r(`mvu_data.${_(q).entries().sortBy(e=>e[0]).map(e=>e[1]).join('.')}`,errorCatched(()=>{const e=(0,o.ref)(j.parse(_.get(getVariables(q),'stat_data',{}),{reportInput:!0}));x&&x(e),S(()=>{const r=_.get(getVariables(q),'stat_data',{}),l=j.safeParse(r);l.error||_.isEqual(e.value,l.data)||(t(()=>{e.value=l.data}),_.isEqual(r,l.data)||updateVariablesWith(e=>_.set(e,'stat_data',l.data),q))},2e3);const{ignoreUpdates:t}=B(e,r=>{const l=j.safeParse(r);l.error||(_.isEqual(r,l.data)||t(()=>{e.value=l.data}),updateVariablesWith(e=>_.set(e,'stat_data',l.data),q))},{deep:!0});return{data:e}})));var j,q,x;const O=i?window:void 0;i&&window.document,i&&window.navigator,i&&window.location;function F(e){var t;const r=(0,o.toValue)(e);return null!=(t=null==r?void 0:r.$el)?t:r}function M(...e){const t=[],r=()=>{t.forEach(e=>e()),t.length=0},l=(0,o.computed)(()=>{const t=b((0,o.toValue)(e[0])).filter(e=>null!=e);return t.every(e=>'string'!=typeof e)?t:void 0}),n=(a=()=>{var t,r;return[null!=(r=null==(t=l.value)?void 0:t.map(e=>F(e)))?r:[O].filter(e=>null!=e),b((0,o.toValue)(l.value?e[1]:e[0])),b((0,o.unref)(l.value?e[2]:e[1])),(0,o.toValue)(l.value?e[3]:e[2])]},c=([e,l,n,a])=>{if(r(),!(null==e?void 0:e.length)||!(null==l?void 0:l.length)||!(null==n?void 0:n.length))return;const o=p(a)?{...a}:a;t.push(...e.flatMap(e=>l.flatMap(t=>n.map(r=>((e,t,r,l)=>(e.addEventListener(t,r,l),()=>e.removeEventListener(t,r,l)))(e,t,r,o)))))},u={flush:'post'},(0,o.watch)(a,c,{...u,immediate:!0}));var a,c,u;return s(r),()=>{n(),r()}}Symbol('vueuse-ssr-width');const P='undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:'undefined'!=typeof globalThis?globalThis:'undefined'!=typeof self?self:{},A='__vueuse_ssr_handlers__',I=L();function L(){return A in P||(P[A]=P[A]||{}),P[A]}function X(e,t){return I[e]||t}function T(e){return null==e?'any':e instanceof Set?'set':e instanceof Map?'map':e instanceof Date?'date':'boolean'==typeof e?'boolean':'string'==typeof e?'string':'object'==typeof e?'object':Number.isNaN(e)?'any':'number'}const U={boolean:{read:e=>'true'===e,write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},R='vueuse-storage';function J(e,t,r,l={}){var n;const{flush:a='pre',deep:c=!0,listenToStorageChanges:u=!0,writeDefaults:s=!0,mergeDefaults:i=!1,shallow:m,window:p=O,eventFilter:f,onError:d=e=>{console.error(e)},initOnMounted:v}=l,g=(m?o.shallowRef:o.ref)('function'==typeof t?t():t),b=(0,o.computed)(()=>(0,o.toValue)(e));if(!r)try{r=X('getDefaultStorage',()=>{var e;return null==(e=O)?void 0:e.localStorage})()}catch(e){d(e)}if(!r)return g;const y=(0,o.toValue)(t),E=T(y),k=null!=(n=l.serializer)?n:U[E],{pause:V,resume:S}=D(g,e=>function(e){try{const t=r.getItem(b.value);if(null==e)C(t,null),r.removeItem(b.value);else{const l=k.write(e);t!==l&&(r.setItem(b.value,l),C(t,l))}}catch(e){d(e)}}(e),{flush:a,deep:c,eventFilter:f});(0,o.watch)(b,()=>w(),{flush:a});let B=!1;const h=e=>{v&&!B||w(e.detail)};function C(e,t){if(p){const l={key:b.value,oldValue:e,newValue:t,storageArea:r};p.dispatchEvent(r instanceof Storage?new StorageEvent('storage',l):new CustomEvent(R,{detail:l}))}}function w(e){if(!e||e.storageArea===r)if(e&&null==e.key)g.value=y;else if(!e||e.key===b.value){V();try{const t=k.write(g.value);void 0!==e&&(null==e?void 0:e.newValue)===t||(g.value=function(e){const t=e?e.newValue:r.getItem(b.value);if(null==t)return s&&null!=y&&r.setItem(b.value,k.write(y)),y;if(!e&&i){const e=k.read(t);return'function'==typeof i?i(e,y):'object'!==E||Array.isArray(e)?e:{...y,...e}}return'string'!=typeof t?t:k.read(t)}(e))}catch(e){d(e)}finally{e?(0,o.nextTick)(S):S()}}}return p&&u&&(r instanceof Storage?M(p,'storage',e=>{v&&!B||w(e)},{passive:!0}):M(p,R,h)),v?function(e,t=!0,r){N(r)?(0,o.onMounted)(e,r):t?e():(0,o.nextTick)(e)}(()=>{B=!0,w()}):w(),g}function W(e,t,r={}){const{window:l=O}=r;return J(e,t,null==l?void 0:l.localStorage,r)}Number.POSITIVE_INFINITY;const G={key:0,class:'create-flow'},H={key:0,class:'cover-panel'},Y={key:1,class:'create-panel'},Z={class:'field'},K={class:'field'},Q={key:0,class:'field'},ee=['value'],te={class:'field'},re=['min','max'],le={class:'age-tip'},ne={key:1,class:'error'},ae={class:'actions'},oe={key:2,class:'create-panel'},ce={class:'tip strong'},ue={class:'allocate-list'},se={class:'counter'},ie=['onClick'],me=['onClick'],pe={key:0,class:'error'},fe={class:'actions'},de={key:3,class:'create-panel'},ve={class:'tip'},ge={class:'tip profession-mark'},be={class:'tip strong'},ye={class:'ability-list'},Ee=['onClick'],ke={class:'ability-source'},ze={key:0,class:'error'},Ne={class:'actions'},Ve={key:4,class:'create-panel'},De={class:'tip profession-mark'},Se={class:'tip'},Be={class:'skill-list'},he=['onClick'],_e={key:0,class:'ability-source'},Ce={key:0,class:'field'},we={class:'field'},je=['value'],qe={class:'field'},xe={class:'field'},Oe={key:2,class:'tip'},Fe={key:3,class:'error'},Me={class:'actions'},Pe={key:5,class:'create-panel'},$e={class:'field'},Ae={class:'tip'},Ie={key:0,class:'field'},Le={key:1,class:'error'},Xe={class:'actions'},Te={key:6,class:'create-panel'},Ue={class:'tip'},Re={class:'dice-rule-list'},Je={key:0,class:'dice-result-list'},We={key:1,class:'error'},Ge={class:'actions'},He={key:0,class:'mvu-textbox'},Ye={class:'mvu-body'},Ze={key:1,class:'gameover-banner'},Ke={class:'hero'},Qe={class:'hero-controls'},et={class:'threat'},tt={class:'world'},rt={class:'tabs'},lt={key:2,class:'panel'},nt={class:'bars'},at={class:'bar'},ot=['value','max'],ct={class:'bar'},ut=['value','max'],st={class:'bar'},it=['value'],mt={class:'grid two'},pt={class:'kv'},ft={key:0},dt={class:'kv'},vt={class:'grid two'},gt={class:'big'},bt={key:0},yt={key:3,class:'panel'},Et={class:'grid two'},kt={key:0},zt={key:0},Nt={key:1,class:'kv'},Vt={key:0,class:'air-menu'},Dt={key:1,class:'loot'},St={key:0},Bt={key:1,class:'kv'},ht={key:4,class:'panel'},_t={key:0},Ct={key:1,class:'kv'},wt={key:0},jt={key:1,class:'kv'},qt={key:5,class:'panel'},xt={class:'grid two'},Ot={key:0},Ft={key:0},Mt={key:1,class:'kv'},Pt={class:'onstage-box in-panel'},$t={key:0,class:'onstage-list'},At={key:0,class:'empty-tip'},It={class:'onstage-head'},Lt={class:'onstage-attrs'},Xt={class:'onstage-thought'},Tt={class:'onstage-box in-panel'},Ut={key:0,class:'onstage-list'},Rt={key:0,class:'empty-tip'},Jt={class:'onstage-head'},Wt={class:'onstage-attrs'},Gt={class:'onstage-attrs'},Ht={class:'onstage-attrs'},Yt={class:'onstage-thought'},Zt='【联合纪年177年8月28日】\n你们是新一批威曼普学院的新生。\n根据【第二协议】中的对等条款，曾经在各地上中学的你们，在即将升到高中时，作为各地与威曼普学院的某种交换成为了对抗异种的中坚力量预备军。\n而好巧不巧的是，在你们接到入学通知的时候，异种在领主【咒妄】的率领下，突破了联合北部防线，斯托尔，夏顿两座边塞城市的沦陷，直接导致重要军事要塞光明大圣堂被完全包围。\n如果光明大圣堂沦陷，整个北部防线有被以点带面凿穿的风险，威曼普城同样根据【第二协议】的条款，派出了【海洋】【魔法支点】【学士】三个结社前往支援。\n而除了这些明面上的力量，新生也不可避免的被卷入了这场漩涡，正面战场也许很难帮得上忙，但是，繁杂的侦查，辅助，探索，清理少量异种的任务，还是不可避免的向你们袭来。\n而幸运与不幸的是，你们这支新成立的学员小队，恰巧成为了最前端的侦察小队，即将承接可能带来最丰厚报偿，也可能是送命的侦查任务……',Kt=(0,o.defineComponent)({__name:'App',setup(e){const t=w(),r=(0,o.computed)(()=>t.data),l=W('apocalypse_dawn:status_fullscreen',!1),n=W('apocalypse_dawn:active_tab','main'),a=(0,o.computed)(()=>{const e=String(r.value.界面.楼层文本.正文??'').trim();return e||function(e){if(!e)return'';const t=e.match(/<content>([\s\S]*?)<\/content>/im);return(t?.[1]??e).replace(/<update(?:variable)?>[\s\S]*?<\/update(?:variable)?>/gim,'').replace(/<update(?:variable)?>[\s\S]*$/gim,'').replace(/<StatusPlaceHolderImpl\/>/gim,'').replace(/<OnStageCharacters>[\s\S]*?<\/OnStageCharacters>/gim,'').replace(/<NpcRelationHints>[\s\S]*?<\/NpcRelationHints>/gim,'').replace(/<(?:think|thinking|context|disclaimer|tucao|current_event|progress)[^>]*>[\s\S]*?<\/(?:think|thinking|context|disclaimer|tucao|current_event|progress)>/gim,'').replace(/<(?:think|thinking|context|disclaimer|tucao|current_event|progress)[^>]*\/>/gim,'').replace(/```[\s\S]*?```/gim,'').replace(/<\/?[^>\n]+>/g,'').replace(/\r/g,'').replace(/\n{3,}/g,'\n\n').trim()}(String(r.value.界面.楼层文本.原文??''))}),c=(0,o.computed)(()=>{const e=r.value.界面.在场角色;return Array.isArray(e)?e:[]}),s=W('apocalypse_dawn:module_fold_state',{在场角色:!1,长期NPC:!1}),i=(0,o.computed)(()=>Boolean(r.value.界面.模块折叠?.在场角色??s.value.在场角色)),m=(0,o.computed)(()=>Boolean(r.value.界面.模块折叠?.长期NPC??s.value.长期NPC)),p=(0,o.computed)(()=>{const e=r.value.世界?.长期NPC列表;return e&&'object'==typeof e?Object.values(e):[]}),f=(0,o.computed)(()=>{const e=r.value.战利品?.仓库?.物品;return e&&'object'==typeof e?Object.entries(e).map(([e,t])=>({name:e,quality:String(t?.品质??'通用'),count:Number(t?.数量??0),category:String(t?.分类??'杂项'),value:Number(t?.价值??0)})).filter(e=>e.count>0).sort((e,t)=>t.count-e.count):[]}),d=(0,o.computed)(()=>!r.value.界面.建卡.已开始),v=(0,o.ref)('cover'),g=(0,o.ref)(''),b=(0,o.ref)(!1),y=['侦察型','轻型','中型','重型','要塞型','地面支援姬'],E=['力量','敏捷','体质','感知','意志','魅力','学识'],k={指挥官:[{name:'指挥通畅',desc:'维持编队链路稳定，减少战术执行混乱。',source:'对应DOCX“指挥官专用/综合指挥链路”'},{name:'调律校准',desc:'更快完成战姬频率调律，缩短战前准备。',source:'对应DOCX“指挥官可进行调律”'},{name:'无人补给',desc:'补给舰调度更高效，提升队伍续航。',source:'对应DOCX“指挥官补给舰与补给链”'},{name:'阵型推演',desc:'更早解锁并熟练使用编队阵型。',source:'对应DOCX“阵型由指挥官决定”'},{name:'后卫协同',desc:'在后卫/支援阵线进行更稳定的协同支援。',source:'对应DOCX“指挥官适合支援阵线”'},{name:'战术复盘',desc:'战后快速总结，提升后续行动判定质量。',source:'对应DOCX“读书/学习解锁编队能力”'}],战姬:[{name:'灵装预热',desc:'灵装化启动更平滑，降低开场波动。',source:'对应DOCX“战姬灵装化规则”'},{name:'高机动切入',desc:'进入交锋区时更容易建立优势。',source:'对应DOCX“空战分层与机动”'},{name:'火力压制',desc:'持续火力更稳定，压制敌方行动。',source:'对应DOCX“连射/多武器火力流程”'},{name:'污染耐受',desc:'对异种污染与持续损伤的承受更强。',source:'对应DOCX“抗污染值与灵装维持”'},{name:'近战反制',desc:'在近距交锋中更易抓住反击窗口。',source:'对应DOCX“地面战动作与反射动作”'},{name:'空域感知',desc:'对空域变化与目标动向更敏锐。',source:'对应DOCX“空战侦查/制空信息”'}],权柄使役者:[{name:'仪式构筑',desc:'更快完成基础仪式框架部署。',source:'对应DOCX“权柄使役者通过仪式施术”'},{name:'圣器引导',desc:'借由象征物与圣器稳定权柄输出。',source:'对应DOCX“圣器与契约表象”'},{name:'权柄共鸣',desc:'更容易触发权柄碎片的有效回应。',source:'对应DOCX“家族血脉中的权柄碎片”'},{name:'精神锚定',desc:'降低高压施术时的精神失稳风险。',source:'对应DOCX“超自然力量承载风险”'},{name:'象征施术',desc:'以简化行为完成可控施术。',source:'对应DOCX“书写者可用简化仪式”'},{name:'契约缄默',desc:'在风险边界内控制权柄代价外溢。',source:'对应DOCX“高位契约与代价”'}]},N={力量:5,敏捷:5,体质:5,感知:5,意志:5,魅力:5,学识:5},V={侦察型:{魔力评级:'4D6',力量加成:'2D6',体质加成:'2D6',抗污染值:'2D6',飞行速度:'6D6',防御评级:'1D4'},轻型:{魔力评级:'4D6',力量加成:'3D6',体质加成:'3D6',抗污染值:'3D6',飞行速度:'5D6',防御评级:'2D6'},中型:{魔力评级:'4D6',力量加成:'4D6',体质加成:'3D6',抗污染值:'5D6',飞行速度:'4D6',防御评级:'3D8'},重型:{魔力评级:'4D6',力量加成:'6D6',体质加成:'5D6',抗污染值:'6D6',飞行速度:'3D5',防御评级:'4D8'},要塞型:{魔力评级:'4D6',力量加成:'10D6',体质加成:'7D6',抗污染值:'10D6',飞行速度:'1D2',防御评级:'7D10'},地面支援姬:{魔力评级:'4D6',力量加成:'5D6',体质加成:'4D6',抗污染值:'10D6',飞行速度:'1D1',防御评级:'4D12'}},D={指挥官:{min:21,max:70},战姬:{min:12,max:21},权柄使役者:{min:12,max:80}},S=['生命','历史','群星','黎明','黑夜','力量','希望','勇气','梦想'],B=/无敌|神|成神|全能|直接成为权柄之主|权柄之主|永生|秒杀|无限|必胜|无上限/i,h=/武器|装备|能力|技能|灵装|道具|神器|无敌|神格|权柄之主/i,C={侦察型:[{id:'1',name:'侦察升级',cost:1,desc:'侦察骰点提升1D6，侦察大成功范围增加。',prerequisites:[]},{id:'1.1',name:'精锐侦察',cost:2,desc:'侦察完毕后压制敌方侦察并夺取制空。',prerequisites:['1']},{id:'2',name:'灵能提升',cost:1,desc:'防御评级提升2D5。',prerequisites:[]},{id:'2.1',name:'灵装升级',cost:2,desc:'额外2级武器槽位并增加1D5魔力评级。',prerequisites:['2']},{id:'3',name:'滑翔',cost:2,desc:'无声行动，降低被侦察概率。',prerequisites:[]},{id:'4',name:'空战适应性',cost:1,desc:'生存能力提高并增加一个武器槽。',prerequisites:[]},{id:'4.1',name:'空战高手',cost:3,desc:'飞行速度提升，可短暂魔力加压再提速。',prerequisites:['4']},{id:'5',name:'炮火通讯协议',cost:2,desc:'辅助瞄准叠加重武器命中直至必中。',prerequisites:[]}],轻型:[{id:'1',name:'追猎者',cost:1,desc:'低生命目标伤害提升并提高追击速度。',prerequisites:[]},{id:'1.1',name:'寻血猎犬',cost:2,desc:'追击时减目标移动并放宽近战触发。',prerequisites:['1']},{id:'1.2',name:'猎血狂犬',cost:3,desc:'低血量目标额外伤害并施加强压制。',prerequisites:['1','1.1']},{id:'2',name:'自由飞翔',cost:1,desc:'飞行速度增加1D6。',prerequisites:[]},{id:'2.1',name:'空中雄鹰',cost:2,desc:'速度优势时所有武器命中+20。',prerequisites:['2']},{id:'2.2',name:'王牌猎鹰',cost:3,desc:'速度优势时所有武器伤害+10。',prerequisites:['2','2.1']},{id:'3',name:'武装巡逻',cost:1,desc:'保留行动可阻断敌方侦察/辅助并必中反制。',prerequisites:[]}],中型:[{id:'1',name:'空中战法',cost:1,desc:'全属性增加2点。',prerequisites:[]},{id:'1.1',name:'竞争战法',cost:2,desc:'自选两项属性增加1D6。',prerequisites:['1']},{id:'1.2',name:'精锐战法',cost:3,desc:'额外武器槽与自由分配点数。',prerequisites:['1','1.1']},{id:'2',name:'扩散压制',cost:1,desc:'可同时压制两个区域。',prerequisites:[]},{id:'2.1',name:'空中骑士',cost:2,desc:'对同级及以下目标伤害/穿甲/命中提升。',prerequisites:['2']},{id:'2.2',name:'空中领主',cost:3,desc:'同空域小体型敌方全面削弱。',prerequisites:['2','2.1']},{id:'2.3',name:'空中霸权',cost:4,desc:'同空域敌方持续削弱，抗污染底线锁定。',prerequisites:['2','2.1','2.2']},{id:'3',name:'卫戍协议',cost:3,desc:'可伴飞重型并令敌方视为后卫状态。',prerequisites:[]}],重型:[{id:'1',name:'高度防御',cost:1,desc:'防御评级增加1D10。',prerequisites:[]},{id:'2',name:'密集编队',cost:1,desc:'同阵线有友方时命中和速度提升。',prerequisites:[]},{id:'2.1',name:'支援',cost:2,desc:'前线可无损使用重武器，交锋区命中提升。',prerequisites:['2']},{id:'3',name:'先进瞄准',cost:1,desc:'瞄准命中增加。',prerequisites:[]},{id:'3.1',name:'魔力侦测',cost:2,desc:'同目标失误后下次命中加值累计。',prerequisites:['3']},{id:'4',name:'密集打击',cost:3,desc:'额外装载两武器槽并降低多武器惩罚。',prerequisites:[]}],要塞型:[{id:'1',name:'不落要塞',cost:1,desc:'防御增加2D10。',prerequisites:[]},{id:'1.1',name:'托布鲁克的铭记',cost:2,desc:'单次伤害上限压制至40%。',prerequisites:['1']},{id:'1.2',name:'马奇诺的警示',cost:3,desc:'半血强化防御，低抗污染时减伤。',prerequisites:['1','1.1']},{id:'2',name:'密集炮火',cost:2,desc:'额外携带1门武器并提升负重。',prerequisites:[]},{id:'2.1',name:'超密集火炮',cost:2,desc:'再增武器槽并降低多武器惩罚。',prerequisites:['2']},{id:'2.2',name:'饱和式打击',cost:3,desc:'一次战斗一次的全武器齐射。',prerequisites:['2','2.1']},{id:'3',name:'自我校准',cost:1,desc:'首次命中后同空域目标后续惩罚减免。',prerequisites:[]},{id:'4',name:'联合反击',cost:6,desc:'进入自动反击状态，遭重型攻击即反制炮击。',prerequisites:[]}],地面支援姬:[{id:'1',name:'高度防御',cost:1,desc:'防御评级增加1D10。',prerequisites:[]},{id:'2',name:'密集编队',cost:1,desc:'同阵线协同时命中与速度提升。',prerequisites:[]},{id:'2.1',name:'支援',cost:2,desc:'前线支援火力无损并强化命中。',prerequisites:['2']},{id:'3',name:'先进瞄准',cost:1,desc:'瞄准命中增加。',prerequisites:[]}]},j=(0,o.reactive)({角色姓名:'',职业:'指挥官',战姬类型:'轻型',年龄:21}),q=(0,o.ref)([]),x=(0,o.ref)(''),O=(0,o.ref)(''),F=(0,o.ref)(''),M=(0,o.reactive)({途径:'生命',名称:'',技能描述:''}),P=(0,o.reactive)({力量:1,敏捷:1,体质:1,感知:1,意志:1,魅力:1,学识:1}),A=(0,o.reactive)({魔力评级:0,力量加成:0,体质加成:0,抗污染值:0,飞行速度:0,防御评级:0}),I=(0,o.ref)(!1),L=(0,o.ref)([]),X=(0,o.computed)(()=>D[j.职业]),T=(0,o.computed)(()=>5-(u().sum(Object.values(P))-E.length)),U=(0,o.computed)(()=>k[j.职业]),R=(0,o.computed)(()=>`${j.职业}能力组`),J=(0,o.computed)(()=>'指挥官'===j.职业?'指挥官能力偏重链路、补给、阵型与协同。':'战姬'===j.职业?'战姬能力偏重灵装、机动、火力与抗污染。':'权柄使役者能力偏重仪式、圣器、契约与权柄稳定。'),Kt=(0,o.computed)(()=>C[j.战姬类型]??[]),Qt=(0,o.computed)(()=>{const e=new Map(Kt.value.map(e=>[e.id,e.cost]));return q.value.reduce((t,r)=>t+(e.get(r)??0),0)}),er=(0,o.computed)(()=>Math.max(0,4-Qt.value)),tr=(0,o.computed)(()=>{const e=V[j.战姬类型];return[{key:'魔力评级',rule:e.魔力评级},{key:'力量加成',rule:e.力量加成},{key:'体质加成',rule:e.体质加成},{key:'抗污染值',rule:e.抗污染值},{key:'飞行速度',rule:e.飞行速度},{key:'防御评级',rule:e.防御评级}]}),rr=(0,o.computed)(()=>[{key:'魔力评级',value:A.魔力评级},{key:'力量加成',value:A.力量加成},{key:'体质加成',value:A.体质加成},{key:'抗污染值',value:A.抗污染值},{key:'飞行速度',value:A.飞行速度},{key:'防御评级',value:A.防御评级}]),lr=(0,o.computed)(()=>{const e=r.value.界面.建卡?.职业;return'指挥官'===e||'战姬'===e||'权柄使役者'===e?e:r.value.主角.档案.身份路径.includes('战姬')?'战姬':r.value.主角.档案.身份路径.includes('权柄')?'权柄使役者':'指挥官'}),nr=(0,o.computed)(()=>'战姬'===lr.value),ar=(0,o.computed)(()=>{const e=r.value.主角.人类属性,t=r.value.主角.锻炼,l=nr.value&&r.value.主角.灵装化.启用?r.value.主角.属性.力量加成:0,n=nr.value&&r.value.主角.灵装化.启用?r.value.主角.属性.体质加成:0;return[{key:'力量',value:e.力量+l,training:t.力量},{key:'敏捷',value:e.敏捷,training:t.敏捷},{key:'体质',value:e.体质+n,training:t.体质},{key:'感知',value:e.感知,training:t.感知},{key:'意志',value:e.意志,training:t.意志},{key:'魅力',value:e.魅力,training:t.魅力},{key:'学识',value:e.学识,training:t.学识}]}),or=(0,o.computed)(()=>[{key:'魔力评级',value:r.value.主角.属性.魔力评级},{key:'力量加成',value:r.value.主角.属性.力量加成},{key:'体质加成',value:r.value.主角.属性.体质加成},{key:'抗污染值',value:r.value.主角.属性.抗污染值},{key:'飞行速度',value:r.value.主角.属性.飞行速度},{key:'防御评级',value:r.value.主角.属性.防御评级}]),cr=(0,o.computed)(()=>'战姬'===lr.value?'战姬老练等级':'权柄使役者'===lr.value?'权柄使役者等级':'军衔等级'),ur=['新手','入门','标准','熟练','专业','精锐','传奇'],sr=['信徒','书写者','编织者','权柄之主'],ir=(0,o.computed)(()=>{if('战姬'===lr.value){const e=u().clamp(r.value.主角.成长.战姬老练等级,1,ur.length)-1;return ur[e]}if('权柄使役者'===lr.value){const e=u().clamp(r.value.主角.成长.权柄使役者等级,1,sr.length)-1;return sr[e]}return'-'}),mr=(0,o.computed)(()=>{if('战姬'===lr.value){const e=u().clamp(r.value.主角.成长.战姬老练等级,1,ur.length),t=e<ur.length?ur[e]:'已达最高',l=r.value.主角.成长.下一级所需魔力碎片;return[`魔力碎片: ${r.value.主角.成长.魔力碎片}`,e<ur.length?`下一阶: ${t}（需 ${l}）`:'老练等级已达顶阶']}if('权柄使役者'===lr.value){const e=r.value.主角.成长.权柄碎片,t=r.value.主角.成长.权柄本源,l=u().clamp(r.value.主角.成长.权柄使役者等级,1,sr.length);return l<=1?[`权柄碎片: ${e}`,'下一阶: 书写者（需 50 权柄碎片）']:2===l?[`权柄碎片: ${e}`,'下一阶: 编织者（需 100 权柄碎片）']:3===l?[`权柄碎片: ${e}`,t?'下一阶: 权柄之主（需 1000 权柄碎片）':'下一阶: 权柄之主（需 1000 权柄碎片 + 权柄本源）']:[`权柄碎片: ${e}`,'权柄本源: '+(t?'已持有':'未持有')]}return['无等级成长信息']});function pr(e){const t=Object.entries(e??{});return 0===t.length?'基础属性：暂无':`基础属性：${t.map(([e,t])=>`${e}:${t}`).join(' / ')}`}function fr(e){r.value.界面.模块折叠||(r.value.界面.模块折叠={在场角色:!1,长期NPC:!1});const t=Boolean(r.value.界面.模块折叠[e]);r.value.界面.模块折叠[e]=!t,s.value={...s.value,[e]:!t}}function dr(e,t){if(t>0){if(T.value<=0)return;if(P[e]>=N[e])return;P[e]+=1}else P[e]<=1||(P[e]-=1)}function vr(){g.value='';if(!j.角色姓名.trim())return void(g.value='请输入角色姓名');const e=X.value,t=Number(j.年龄);b.value||!(!Number.isFinite(t)||t<e.min||t>e.max)?v.value='human':g.value=`年龄不符合职业限制（${e.min}-${e.max}）`}function gr(){g.value='',b.value||0===T.value?v.value='abilities':g.value='请先分配完全部 5 点人类属性'}function br(){g.value='',b.value||0!==L.value.length?v.value='profession':g.value='请至少选择 1 项基础能力'}function yr(e){g.value='';const t=Kt.value.find(t=>t.id===e);if(t){if(q.value.includes(e)){return Kt.value.some(t=>q.value.includes(t.id)&&t.prerequisites.includes(e))&&!b.value?void(g.value='有后续技能依赖该节点，无法取消'):void(q.value=q.value.filter(t=>t!==e))}b.value||function(e){const t=Kt.value.find(t=>t.id===e);return!!t&&t.prerequisites.every(e=>q.value.includes(e))}(e)?!b.value&&Qt.value+t.cost>4?g.value='技能点不足（初始仅 4 点）':q.value=[...q.value,e]:g.value=`技能 ${e} 前置条件不足`}}function Er(){if('权柄使役者'!==j.职业)return'';if(!M.名称.trim())return'请填写权柄名称';if(!M.技能描述.trim())return'请填写赋予技能';const e=`${M.名称}\n${M.技能描述}`;return!b.value&&B.test(e)?'权柄描述存在超限内容（无敌/成神/直接权柄之主等），请重写':''}function kr(){if(g.value='','战姬'===j.职业&&!b.value&&0===q.value.length)return void(g.value='请至少选择1个战姬技能节点');const e=Er();e?g.value=e:v.value='background'}function zr(){g.value='',O.value.trim()||b.value?'战姬'!==j.职业?Sr():v.value='warmaid':g.value='请填写背景'}function Nr(e){return Math.floor(Math.random()*e)+1}function Vr(e){const t=e.trim().toUpperCase().match(/^(\d+)D(\d+)$/);if(!t)return 0;const r=Number(t[1]),l=Number(t[2]);let n=0;for(let e=0;e<r;e+=1)n+=Nr(l);return n}function Dr(){g.value='';const e=V[j.战姬类型];A.魔力评级=Vr(e.魔力评级),A.力量加成=Vr(e.力量加成),A.体质加成=Vr(e.体质加成),A.抗污染值=Vr(e.抗污染值),A.飞行速度=Vr(e.飞行速度),A.防御评级=Vr(e.防御评级),I.value=!0}function Sr(){if(g.value='','战姬'===j.职业&&!I.value&&!b.value)return void(g.value='请先完成战姬六维骰点');const e=j.角色姓名.trim();if(!e)return void(g.value='请输入角色姓名');const t=Er();if(t)return void(g.value=t);const l=O.value.trim(),n=F.value.trim()||l.split(/\r?\n/).map(e=>e.trim()).filter(Boolean).filter(e=>!h.test(e)).join(' ').slice(0,320);if(r.value.界面.建卡={已开始:!0,角色姓名:e,职业:j.职业,战姬类型:j.战姬类型,年龄:Number(j.年龄),作弊模式:b.value},r.value.主角.档案.代号=e,r.value.主角.档案.身份路径='战姬'===j.职业?`战姬-${j.战姬类型}`:j.职业,r.value.主角.人类属性={...P},r.value.主角.锻炼={力量:0,敏捷:0,体质:0,感知:0,意志:0,魅力:0,学识:0},'战姬'===j.职业){r.value.主角.属性={...A};const e=Math.max(20,10*A.魔力评级);r.value.主角.资源.最大魔力=e,r.value.主角.资源.当前魔力=e,r.value.主角.灵装化.每回合耗魔=Math.max(1,Math.ceil(e/10))}else r.value.主角.属性={魔力评级:0,力量加成:0,体质加成:0,抗污染值:0,飞行速度:0,防御评级:0};r.value.主角.灵装化.启用=!1,r.value.主角.灵装化.手动切换=!1,r.value.主角.灵装化.上次结算轮次=r.value.主角.战术.当前轮次,r.value.主角.基础能力.已选=[...L.value],r.value.主角.技能树={可用技能点:4-Qt.value,已用技能点:Qt.value,已解锁:Object.fromEntries(q.value.map(e=>[e,!0])),自定义:x.value.trim()},r.value.主角.权柄={权柄名称:M.名称.trim(),权柄途径:M.途径,碎片数:'权柄使役者'===j.职业?1:0,赋予技能:M.技能描述.trim(),审核通过:'权柄使役者'===j.职业&&!B.test(`${M.名称}\n${M.技能描述}`),审核备注:'权柄使役者'===j.职业?'初始为【信徒】。禁止无敌、成神、直接权柄之主等超限设定。':''},r.value.主角.背景={原文:l,摘要:n},r.value.主角.成长.战姬老练等级=1,r.value.主角.成长.权柄使役者等级=1,r.value.主角.成长.魔力碎片=0,r.value.主角.成长.下一级所需魔力碎片=10,r.value.主角.成长.权柄碎片=0,r.value.主角.成长.权柄本源=!1,r.value.世界.当前时间='联合纪年177年8月28日 08:00',r.value.世界.当前地点='卡尔斯战姬学院 主校区 报到大厅',r.value.世界.战区威胁等级='低',r.value.世界.近期事务={新生报道:'在威曼普学院完成身份登记与宿舍分配',北线战况:'咒妄率异种突破北部防线，光明大圣堂遭围困',小队任务:'新生侦察小队即将承接前沿侦查任务',背景摘要:n||'暂无背景摘要'},r.value.战场日志={开场简报:'联合纪年177年8月28日，新生小队在威曼普学院报到并被编入前沿侦察序列。'},r.value.界面.楼层文本={正文:Zt,原文:Zt,更新时间:Date.now()},r.value.界面.在场角色=[],r.value.界面.模块折叠={在场角色:!1,长期NPC:!1},s.value={在场角色:!1,长期NPC:!1},r.value.战利品.显示战利品=!1,r.value.战利品.当前容器={},r.value.战利品.最近获取={},r.value.战利品.副本={已激活:!1,副本名称:'',实验室等级:'基础实验室',地图规模:'小型',房间总数:0,当前房间索引:0,已探索房间:0,最近房间:'',最近结算:'',房间列表:[]},r.value.战利品.仓库={联合币:0,芯片:0,物品:{},独特收藏品:[]},r.value.界面.游戏结束={已结束:!1,原因:'',时间戳:0},r.value.界面.空战反馈={待反馈:!1,摘要:'',时间戳:0},r.value.世界.长期NPC列表={},r.value.世界.NPC关系追踪={},r.value.主角.战术.词条区={},r.value.主角.战术.空战={菜单开启:!1,流程阶段:'遭遇',天气:'天气晴朗',天气判定值:11,天气命中修正:5,天气探测修正:0,天气移速倍率:1,空域层:'标准空域',格距米:500,我方单位:{侦察型:0,轻型:0,中型:0,重型:0,要塞型:0,其他:0},敌方单位:{侦察型:0,轻型:0,中型:0,重型:0,要塞型:0,其他:0},我方制空点:0,敌方制空点:0,制空修正:0,重武器命中条件:'无',触发突袭轮:!1,突袭来源:'无',当前行动序列:[],台风眼格:[],侦查单位类型:'侦察型',侦查目标类型:'轻型',侦查结果:0,目标隐匿剩余:0,我方闪避值:3,敌方闪避值:3,我方近失叠加命中:0,敌方近失叠加命中:0,最近命中详情:'',我方总耐久:100,敌方总耐久:100,已结算回合:0,最近结算摘要:''}}function Br(){if(!nr.value)return;const e=!r.value.主角.灵装化.启用;r.value.主角.灵装化.手动切换=e,r.value.主角.灵装化.启用=e,e&&(r.value.主角.灵装化.上次结算轮次=r.value.主角.战术.当前轮次)}return(0,o.watch)(()=>j.职业,()=>{j.年龄=u().clamp(Number(j.年龄)||X.value.min,X.value.min,X.value.max);const e=new Set(U.value.map(e=>e.name));L.value=L.value.filter(t=>e.has(t)),q.value=[],x.value='',M.名称='',M.技能描述='',M.途径='生命','战姬'!==j.职业&&(I.value=!1,Object.assign(A,{魔力评级:0,力量加成:0,体质加成:0,抗污染值:0,飞行速度:0,防御评级:0}))},{immediate:!0}),(0,o.watch)(()=>j.战姬类型,()=>{I.value=!1}),(0,o.watchEffect)(()=>{const e=r.value.界面.建卡;e&&!e.已开始&&(j.角色姓名=e.角色姓名||'',j.职业=e.职业,j.战姬类型=e.战姬类型,j.年龄=e.年龄,b.value=Boolean(e.作弊模式))}),(0,o.watchEffect)(()=>{if(d.value)return;'空战'===r.value.主角.战术.战斗模式&&r.value.主角.战术.是否战斗中&&(n.value='battle')}),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{class:(0,o.normalizeClass)(['card',{fullscreen:(0,o.unref)(l)}])},[(0,o.unref)(d)?((0,o.openBlock)(),(0,o.createElementBlock)('section',G,['cover'===(0,o.unref)(v)?((0,o.openBlock)(),(0,o.createElementBlock)('section',H,[t[25]||(t[25]=(0,o.createElementVNode)('h1',{class:'logo'},'天启黎明',-1)),t[26]||(t[26]=(0,o.createElementVNode)('p',{class:'author'},'作者：未来',-1)),(0,o.createElementVNode)('button',{type:'button',class:'start-btn large',onClick:t[0]||(t[0]=e=>v.value='profile')},'开始游戏'),(0,o.createElementVNode)('button',{type:'button',class:(0,o.normalizeClass)(['cheat-btn',{active:(0,o.unref)(b)}]),onClick:t[1]||(t[1]=e=>b.value=!(0,o.unref)(b))},(0,o.toDisplayString)((0,o.unref)(b)?'作弊模式：开启':'作弊模式：关闭'),3)])):'profile'===(0,o.unref)(v)?((0,o.openBlock)(),(0,o.createElementBlock)('section',Y,[t[32]||(t[32]=(0,o.createElementVNode)('h2',null,'建卡 - 基础信息',-1)),(0,o.createElementVNode)('label',Z,[t[27]||(t[27]=(0,o.createElementVNode)('span',null,'角色姓名：',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[2]||(t[2]=e=>(0,o.unref)(j).角色姓名=e),type:'text',placeholder:'输入角色姓名'},null,512),[[o.vModelText,(0,o.unref)(j).角色姓名,void 0,{trim:!0}]])]),(0,o.createElementVNode)('label',K,[t[29]||(t[29]=(0,o.createElementVNode)('span',null,'职业：',-1)),(0,o.withDirectives)((0,o.createElementVNode)('select',{'onUpdate:modelValue':t[3]||(t[3]=e=>(0,o.unref)(j).职业=e)},[...t[28]||(t[28]=[(0,o.createElementVNode)('option',{value:'指挥官'},'指挥官',-1),(0,o.createElementVNode)('option',{value:'战姬'},'战姬',-1),(0,o.createElementVNode)('option',{value:'权柄使役者'},'权柄使役者',-1)])],512),[[o.vModelSelect,(0,o.unref)(j).职业]])]),'战姬'===(0,o.unref)(j).职业?((0,o.openBlock)(),(0,o.createElementBlock)('label',Q,[t[30]||(t[30]=(0,o.createElementVNode)('span',null,'战姬类型：',-1)),(0,o.withDirectives)((0,o.createElementVNode)('select',{'onUpdate:modelValue':t[4]||(t[4]=e=>(0,o.unref)(j).战姬类型=e)},[((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(y,e=>(0,o.createElementVNode)('option',{key:e,value:e},(0,o.toDisplayString)(e),9,ee)),64))],512),[[o.vModelSelect,(0,o.unref)(j).战姬类型]])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('label',te,[t[31]||(t[31]=(0,o.createElementVNode)('span',null,'年龄：',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[5]||(t[5]=e=>(0,o.unref)(j).年龄=e),type:'number',min:(0,o.unref)(X).min,max:(0,o.unref)(X).max},null,8,re),[[o.vModelText,(0,o.unref)(j).年龄,void 0,{number:!0}]])]),(0,o.createElementVNode)('p',le,'年龄限制：'+(0,o.toDisplayString)((0,o.unref)(X).min)+' - '+(0,o.toDisplayString)((0,o.unref)(X).max),1),(0,o.unref)(g)?((0,o.openBlock)(),(0,o.createElementBlock)('p',ne,(0,o.toDisplayString)((0,o.unref)(g)),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',ae,[(0,o.createElementVNode)('button',{type:'button',class:'secondary-btn',onClick:t[6]||(t[6]=e=>v.value='cover')},'返回'),(0,o.createElementVNode)('button',{type:'button',class:'start-btn',onClick:vr},'下一步')])])):'human'===(0,o.unref)(v)?((0,o.openBlock)(),(0,o.createElementBlock)('section',oe,[t[33]||(t[33]=(0,o.createElementVNode)('h2',null,'建卡 - 人类属性',-1)),t[34]||(t[34]=(0,o.createElementVNode)('p',{class:'tip'},'初始属性均为 1，自由分配 5 点。人类属性上限统一为 5。',-1)),(0,o.createElementVNode)('p',ce,'剩余可分配点数：'+(0,o.toDisplayString)((0,o.unref)(T)),1),(0,o.createElementVNode)('ul',ue,[((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(E,e=>(0,o.createElementVNode)('li',{key:e},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e)+'（上限 '+(0,o.toDisplayString)(N[e])+'）',1),(0,o.createElementVNode)('div',se,[(0,o.createElementVNode)('button',{type:'button',onClick:t=>dr(e,-1)},'-',8,ie),(0,o.createElementVNode)('strong',null,(0,o.toDisplayString)((0,o.unref)(P)[e]),1),(0,o.createElementVNode)('button',{type:'button',onClick:t=>dr(e,1)},'+',8,me)])])),64))]),(0,o.unref)(g)?((0,o.openBlock)(),(0,o.createElementBlock)('p',pe,(0,o.toDisplayString)((0,o.unref)(g)),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',fe,[(0,o.createElementVNode)('button',{type:'button',class:'secondary-btn',onClick:t[7]||(t[7]=e=>v.value='profile')},'上一步'),(0,o.createElementVNode)('button',{type:'button',class:'start-btn',onClick:gr},'下一步')])])):'abilities'===(0,o.unref)(v)?((0,o.openBlock)(),(0,o.createElementBlock)('section',de,[t[35]||(t[35]=(0,o.createElementVNode)('h2',null,'建卡 - 基础能力选择',-1)),(0,o.createElementVNode)('p',ve,(0,o.toDisplayString)((0,o.unref)(J)),1),(0,o.createElementVNode)('p',ge,(0,o.toDisplayString)((0,o.unref)(R)),1),(0,o.createElementVNode)('p',be,'已选择：'+(0,o.toDisplayString)((0,o.unref)(L).length)+'/'+(0,o.toDisplayString)(2),1),(0,o.createElementVNode)('ul',ye,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(U),e=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:e.name},[(0,o.createElementVNode)('button',{type:'button',class:(0,o.normalizeClass)(['ability-btn',{active:(0,o.unref)(L).includes(e.name)}]),onClick:t=>function(e){g.value='';const t=L.value;t.includes(e)?L.value=t.filter(t=>t!==e):t.length>=2?g.value='当前版本最多选择 2 项基础能力':L.value=[...t,e]}(e.name)},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.name),1),(0,o.createElementVNode)('small',null,(0,o.toDisplayString)(e.desc),1),(0,o.createElementVNode)('small',ke,(0,o.toDisplayString)(e.source),1)],10,Ee)]))),128))]),(0,o.unref)(g)?((0,o.openBlock)(),(0,o.createElementBlock)('p',ze,(0,o.toDisplayString)((0,o.unref)(g)),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',Ne,[(0,o.createElementVNode)('button',{type:'button',class:'secondary-btn',onClick:t[8]||(t[8]=e=>v.value='human')},'上一步'),(0,o.createElementVNode)('button',{type:'button',class:'start-btn',onClick:br},'下一步')])])):'profession'===(0,o.unref)(v)?((0,o.openBlock)(),(0,o.createElementBlock)('section',Ve,[t[42]||(t[42]=(0,o.createElementVNode)('h2',null,'建卡 - 职业专属',-1)),(0,o.createElementVNode)('p',De,(0,o.toDisplayString)((0,o.unref)(j).职业),1),'战姬'===(0,o.unref)(j).职业?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createElementVNode)('p',Se,'技能点：'+(0,o.toDisplayString)((0,o.unref)(er))+'/'+(0,o.toDisplayString)(4)+'（初始4点，后续每次晋级+2）',1),(0,o.createElementVNode)('ul',Be,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(Kt),e=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:e.id},[(0,o.createElementVNode)('button',{type:'button',class:(0,o.normalizeClass)(['ability-btn',{active:(0,o.unref)(q).includes(e.id)}]),onClick:t=>yr(e.id)},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.id)+' '+(0,o.toDisplayString)(e.name)+'（'+(0,o.toDisplayString)(e.cost)+'点）',1),(0,o.createElementVNode)('small',null,(0,o.toDisplayString)(e.desc),1),e.prerequisites.length>0?((0,o.openBlock)(),(0,o.createElementBlock)('small',_e,' 前置：'+(0,o.toDisplayString)(e.prerequisites.join('、')),1)):(0,o.createCommentVNode)('v-if',!0)],10,he)]))),128))]),(0,o.unref)(b)?((0,o.openBlock)(),(0,o.createElementBlock)('label',Ce,[t[36]||(t[36]=(0,o.createElementVNode)('span',null,'作弊模式：自定义技能记录（可任意填写）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':t[9]||(t[9]=e=>(0,o.isRef)(x)?x.value=e:null),rows:'4',placeholder:'例：终焉炮击, 无限位移'},null,512),[[o.vModelText,(0,o.unref)(x)]])])):(0,o.createCommentVNode)('v-if',!0)],64)):'权柄使役者'===(0,o.unref)(j).职业?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createElementVNode)('label',we,[t[37]||(t[37]=(0,o.createElementVNode)('span',null,'权柄途径：',-1)),(0,o.withDirectives)((0,o.createElementVNode)('select',{'onUpdate:modelValue':t[10]||(t[10]=e=>(0,o.unref)(M).途径=e)},[((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(S,e=>(0,o.createElementVNode)('option',{key:e,value:e},(0,o.toDisplayString)(e),9,je)),64))],512),[[o.vModelSelect,(0,o.unref)(M).途径]])]),(0,o.createElementVNode)('label',qe,[t[38]||(t[38]=(0,o.createElementVNode)('span',null,'权柄名称：',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[11]||(t[11]=e=>(0,o.unref)(M).名称=e),type:'text',placeholder:'例：史前爬行动物'},null,512),[[o.vModelText,(0,o.unref)(M).名称,void 0,{trim:!0}]])]),(0,o.createElementVNode)('label',xe,[t[39]||(t[39]=(0,o.createElementVNode)('span',null,'赋予技能：',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':t[12]||(t[12]=e=>(0,o.unref)(M).技能描述=e),rows:'8',placeholder:'梦幻变化(强化0级)：\\n将自身以梦想之权柄转变为你希望化形的动物……'},null,512),[[o.vModelText,(0,o.unref)(M).技能描述,void 0,{trim:!0}]])]),t[40]||(t[40]=(0,o.createElementVNode)('pre',{class:'example-box'},'权柄名称：史前爬行动物\n权柄途径：梦想\n碎片数：1\n赋予技能：\n梦幻变化(强化0级)：\n将自身以梦想之权柄转变为你希望化形的动物。\n生命将额外获得200点，失去后次日或消耗等量魔力可以恢复。\n攻击调整为2d15纯物理攻击并附带权柄魔力，防御调整为20点物理护甲。\n最多不得变换为体型超过3（长宽高4米），魔力消耗：每5分钟100点。',-1)),t[41]||(t[41]=(0,o.createElementVNode)('p',{class:'tip'},'等级固定从【信徒】开始。禁止无敌、神化、直接成为权柄之主等超限设定。',-1))],64)):((0,o.openBlock)(),(0,o.createElementBlock)('p',Oe,'指挥官无额外职业树，后续可在游戏中通过学习解锁阵型与战术模块。')),(0,o.unref)(g)?((0,o.openBlock)(),(0,o.createElementBlock)('p',Fe,(0,o.toDisplayString)((0,o.unref)(g)),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',Me,[(0,o.createElementVNode)('button',{type:'button',class:'secondary-btn',onClick:t[13]||(t[13]=e=>v.value='abilities')},'上一步'),(0,o.createElementVNode)('button',{type:'button',class:'start-btn',onClick:kr},'下一步')])])):'background'===(0,o.unref)(v)?((0,o.openBlock)(),(0,o.createElementBlock)('section',Pe,[t[45]||(t[45]=(0,o.createElementVNode)('h2',null,'建卡 - 人物背景',-1)),t[46]||(t[46]=(0,o.createElementVNode)('p',{class:'tip'},'可填写约1000字背景。武器/能力/装备将被过滤，不计入有效背景。',-1)),(0,o.createElementVNode)('label',$e,[t[43]||(t[43]=(0,o.createElementVNode)('span',null,'背景原文：',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':t[14]||(t[14]=e=>(0,o.isRef)(O)?O.value=e:null),rows:'12',maxlength:'1200',placeholder:'输入角色背景（约1000字）'},null,512),[[o.vModelText,(0,o.unref)(O),void 0,{trim:!0}]])]),(0,o.createElementVNode)('p',Ae,'当前字数：'+(0,o.toDisplayString)((0,o.unref)(O).length)+'/1200',1),(0,o.unref)(b)?((0,o.openBlock)(),(0,o.createElementBlock)('label',Ie,[t[44]||(t[44]=(0,o.createElementVNode)('span',null,'作弊模式：背景摘要可手动覆盖',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':t[15]||(t[15]=e=>(0,o.isRef)(F)?F.value=e:null),rows:'5',placeholder:'留空则自动摘要'},null,512),[[o.vModelText,(0,o.unref)(F),void 0,{trim:!0}]])])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(g)?((0,o.openBlock)(),(0,o.createElementBlock)('p',Le,(0,o.toDisplayString)((0,o.unref)(g)),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',Xe,[(0,o.createElementVNode)('button',{type:'button',class:'secondary-btn',onClick:t[16]||(t[16]=e=>v.value='profession')},'上一步'),(0,o.createElementVNode)('button',{type:'button',class:'start-btn',onClick:zr},'下一步')])])):((0,o.openBlock)(),(0,o.createElementBlock)('section',Te,[t[47]||(t[47]=(0,o.createElementVNode)('h2',null,'建卡 - 战姬六维骰点',-1)),(0,o.createElementVNode)('p',Ue,'按《天启黎明V0.5》战姬类型规则进行骰点：'+(0,o.toDisplayString)((0,o.unref)(j).战姬类型),1),(0,o.createElementVNode)('ul',Re,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(tr),e=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:e.key},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.key),1),(0,o.createElementVNode)('strong',null,(0,o.toDisplayString)(e.rule),1)]))),128))]),(0,o.createElementVNode)('button',{type:'button',class:'start-btn',onClick:Dr},'掷骰'),(0,o.unref)(I)?((0,o.openBlock)(),(0,o.createElementBlock)('ul',Je,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(rr),e=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:e.key},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.key),1),(0,o.createElementVNode)('strong',null,(0,o.toDisplayString)(e.value),1)]))),128))])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(g)?((0,o.openBlock)(),(0,o.createElementBlock)('p',We,(0,o.toDisplayString)((0,o.unref)(g)),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',Ge,[(0,o.createElementVNode)('button',{type:'button',class:'secondary-btn',onClick:t[17]||(t[17]=e=>v.value='background')},'上一步'),(0,o.createElementVNode)('button',{type:'button',class:'start-btn',onClick:Sr},'完成建卡并开始')])]))])):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.unref)(a)?((0,o.openBlock)(),(0,o.createElementBlock)('section',He,[t[48]||(t[48]=(0,o.createElementVNode)('h2',null,'MVU正文',-1)),(0,o.createElementVNode)('pre',Ye,(0,o.toDisplayString)((0,o.unref)(a)),1)])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(r).界面.游戏结束.已结束?((0,o.openBlock)(),(0,o.createElementBlock)('section',Ze,[t[49]||(t[49]=(0,o.createElementVNode)('h2',null,'本局已结束',-1)),(0,o.createElementVNode)('p',null,(0,o.toDisplayString)((0,o.unref)(r).界面.游戏结束.原因||'生命值归零'),1)])):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('header',Ke,[(0,o.createElementVNode)('div',null,[t[50]||(t[50]=(0,o.createElementVNode)('h1',null,'天启黎明',-1)),(0,o.createElementVNode)('p',null,(0,o.toDisplayString)((0,o.unref)(r).主角.档案.代号)+' | '+(0,o.toDisplayString)((0,o.unref)(lr))+' | '+(0,o.toDisplayString)((0,o.unref)(r).主角.档案.身份路径),1)]),(0,o.createElementVNode)('div',Qe,[(0,o.createElementVNode)('span',et,'威胁: '+(0,o.toDisplayString)((0,o.unref)(r).世界.战区威胁等级),1),(0,o.createElementVNode)('button',{type:'button',class:'fullscreen-btn',onClick:t[18]||(t[18]=e=>l.value=!(0,o.unref)(l))},(0,o.toDisplayString)((0,o.unref)(l)?'退出全屏':'全屏'),1)])]),(0,o.createElementVNode)('section',tt,[(0,o.createElementVNode)('p',null,'时间: '+(0,o.toDisplayString)((0,o.unref)(r).世界.当前时间),1),(0,o.createElementVNode)('p',null,'地点: '+(0,o.toDisplayString)((0,o.unref)(r).世界.当前地点),1),(0,o.createElementVNode)('p',null,'天气: '+(0,o.toDisplayString)((0,o.unref)(r).世界.天气),1)]),(0,o.createElementVNode)('nav',rt,[(0,o.createElementVNode)('button',{type:'button',class:(0,o.normalizeClass)({active:'main'===(0,o.unref)(n)}),onClick:t[19]||(t[19]=e=>n.value='main')},'主状态栏',2),(0,o.createElementVNode)('button',{type:'button',class:(0,o.normalizeClass)({active:'battle'===(0,o.unref)(n)}),onClick:t[20]||(t[20]=e=>n.value='battle')},'战场',2),(0,o.createElementVNode)('button',{type:'button',class:(0,o.normalizeClass)({active:'recent'===(0,o.unref)(n)}),onClick:t[21]||(t[21]=e=>n.value='recent')},'近期事务',2),(0,o.createElementVNode)('button',{type:'button',class:(0,o.normalizeClass)({active:'warehouse'===(0,o.unref)(n)}),onClick:t[22]||(t[22]=e=>n.value='warehouse')},'仓库',2)]),'main'===(0,o.unref)(n)?((0,o.openBlock)(),(0,o.createElementBlock)('section',lt,[(0,o.createElementVNode)('div',nt,[(0,o.createElementVNode)('div',at,[t[51]||(t[51]=(0,o.createElementVNode)('label',null,'生命',-1)),(0,o.createElementVNode)('progress',{value:(0,o.unref)(r).主角.资源.当前生命,max:(0,o.unref)(r).主角.资源.最大生命},null,8,ot)]),(0,o.createElementVNode)('div',ct,[t[52]||(t[52]=(0,o.createElementVNode)('label',null,'魔力',-1)),(0,o.createElementVNode)('progress',{value:(0,o.unref)(r).主角.资源.当前魔力,max:(0,o.unref)(r).主角.资源.最大魔力},null,8,ut)]),(0,o.createElementVNode)('div',st,[t[53]||(t[53]=(0,o.createElementVNode)('label',null,'污染',-1)),(0,o.createElementVNode)('progress',{value:(0,o.unref)(r).主角.资源.污染值,max:'100'},null,8,it)])]),(0,o.createElementVNode)('div',mt,[(0,o.createElementVNode)('article',null,[t[54]||(t[54]=(0,o.createElementVNode)('h3',null,'人类属性（七项）',-1)),(0,o.createElementVNode)('ul',pt,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(ar),e=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:e.key},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.key),1),(0,o.createElementVNode)('strong',null,(0,o.toDisplayString)(e.value)+'（锻炼 '+(0,o.toDisplayString)(e.training)+'/100）',1)]))),128))])]),(0,o.unref)(nr)?((0,o.openBlock)(),(0,o.createElementBlock)('article',ft,[t[55]||(t[55]=(0,o.createElementVNode)('h3',null,'战姬属性（六项）',-1)),(0,o.createElementVNode)('ul',dt,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(or),e=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:e.key},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.key),1),(0,o.createElementVNode)('strong',null,(0,o.toDisplayString)(e.value),1)]))),128))])])):(0,o.createCommentVNode)('v-if',!0)]),(0,o.createElementVNode)('div',vt,[(0,o.createElementVNode)('article',null,[(0,o.createElementVNode)('h3',null,(0,o.toDisplayString)((0,o.unref)(cr)),1),(0,o.createElementVNode)('p',gt,(0,o.toDisplayString)((0,o.unref)(ir)),1),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(mr),e=>((0,o.openBlock)(),(0,o.createElementBlock)('p',{key:e},(0,o.toDisplayString)(e),1))),128))]),(0,o.unref)(nr)?((0,o.openBlock)(),(0,o.createElementBlock)('article',bt,[t[56]||(t[56]=(0,o.createElementVNode)('h3',null,'灵装状态',-1)),(0,o.createElementVNode)('p',null,'当前状态: '+(0,o.toDisplayString)((0,o.unref)(r).主角.灵装化.启用?'已灵装化':'未启用')+'（'+(0,o.toDisplayString)((0,o.unref)(r).主角.灵装化.灵装模式)+'）',1),(0,o.createElementVNode)('p',null,'灵装槽: '+(0,o.toDisplayString)((0,o.unref)(r).主角.资源.灵装槽当前)+'/'+(0,o.toDisplayString)((0,o.unref)(r).主角.资源.灵装槽上限),1),(0,o.createElementVNode)('button',{type:'button',class:'toggle-btn',onClick:Br},(0,o.toDisplayString)((0,o.unref)(r).主角.灵装化.启用?'手动解除灵装':'手动开启灵装'),1)])):(0,o.createCommentVNode)('v-if',!0)]),(0,o.createElementVNode)('article',null,[t[57]||(t[57]=(0,o.createElementVNode)('h3',null,'最近技能检定',-1)),(0,o.createElementVNode)('p',null,'属性: '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.关联属性),1),(0,o.createElementVNode)('p',null,'难度: '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.难度说明)+'（减值 '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.难度减值)+'）',1),(0,o.createElementVNode)('p',null,'骰点: '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.原始骰点)+' + '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.属性加值)+' - '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.难度减值)+' = '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.总值),1),(0,o.createElementVNode)('p',null,'结果: '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.结果),1),(0,o.createElementVNode)('p',null,(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.结果描述),1)])])):'battle'===(0,o.unref)(n)?((0,o.openBlock)(),(0,o.createElementBlock)('section',yt,[(0,o.createElementVNode)('div',Et,[(0,o.createElementVNode)('article',null,[t[58]||(t[58]=(0,o.createElementVNode)('h3',null,'战术态势',-1)),(0,o.createElementVNode)('p',null,'模式: '+(0,o.toDisplayString)((0,o.unref)(r).主角.战术.战斗模式)+' / '+(0,o.toDisplayString)((0,o.unref)(r).主角.战术.是否战斗中?'战斗中':'非战斗'),1),(0,o.createElementVNode)('p',null,'阵线: '+(0,o.toDisplayString)((0,o.unref)(r).主角.战术.当前阵线),1),(0,o.createElementVNode)('p',null,'制空权: '+(0,o.toDisplayString)((0,o.unref)(r).主角.战术.制空权),1),(0,o.createElementVNode)('p',null,'轮次: '+(0,o.toDisplayString)((0,o.unref)(r).主角.战术.当前轮次),1),(0,o.createElementVNode)('p',null,'行动/移动: '+(0,o.toDisplayString)((0,o.unref)(r).主角.资源.行动点)+'/'+(0,o.toDisplayString)((0,o.unref)(r).主角.资源.移动点),1),(0,o.createElementVNode)('p',null,'火力惩罚: '+(0,o.toDisplayString)((0,o.unref)(r).主角.战术.火力惩罚),1),(0,o.unref)(nr)?((0,o.openBlock)(),(0,o.createElementBlock)('p',kt,'灵装每回合消耗: 魔力'+(0,o.toDisplayString)((0,o.unref)(r).主角.灵装化.每回合耗魔)+' / 槽'+(0,o.toDisplayString)((0,o.unref)(r).主角.灵装化.每回合耗槽),1)):(0,o.createCommentVNode)('v-if',!0)]),(0,o.createElementVNode)('article',null,[t[59]||(t[59]=(0,o.createElementVNode)('h3',null,'异常状态',-1)),(0,o.unref)(u()).isEmpty((0,o.unref)(r).主角.异常状态)?((0,o.openBlock)(),(0,o.createElementBlock)('p',zt,'无')):((0,o.openBlock)(),(0,o.createElementBlock)('ul',Nt,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(r).主角.异常状态,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:t},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(t)+'('+(0,o.toDisplayString)(e.等级)+')',1),(0,o.createElementVNode)('strong',null,'x'+(0,o.toDisplayString)(e.剩余轮次),1)]))),128))]))])]),'空战'===(0,o.unref)(r).主角.战术.战斗模式?((0,o.openBlock)(),(0,o.createElementBlock)('article',Vt,[...t[60]||(t[60]=[(0,o.createElementVNode)('h3',null,'空战系统入口',-1),(0,o.createElementVNode)('button',{type:'button',class:'toggle-btn',disabled:''},'空战系统 [未完成系统别开]',-1)])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('article',null,[t[61]||(t[61]=(0,o.createElementVNode)('h3',null,'最近技能检定',-1)),(0,o.createElementVNode)('p',null,'属性: '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.关联属性),1),(0,o.createElementVNode)('p',null,'难度: '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.难度说明)+'（减值 '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.难度减值)+'）',1),(0,o.createElementVNode)('p',null,'骰点: '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.原始骰点)+' + '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.属性加值)+' - '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.难度减值)+' = '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.总值),1),(0,o.createElementVNode)('p',null,'结果: '+(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.结果),1),(0,o.createElementVNode)('p',null,(0,o.toDisplayString)((0,o.unref)(r).主角.技能检定.结果描述),1)]),(0,o.unref)(r).战利品.显示战利品?((0,o.openBlock)(),(0,o.createElementBlock)('article',Dt,[t[62]||(t[62]=(0,o.createElementVNode)('h3',null,'战利品',-1)),(0,o.unref)(u()).isEmpty((0,o.unref)(r).战利品.最近获取)?((0,o.openBlock)(),(0,o.createElementBlock)('p',St,'暂无')):((0,o.openBlock)(),(0,o.createElementBlock)('ul',Bt,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(r).战利品.最近获取,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:t},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(t)+'('+(0,o.toDisplayString)(e.品质)+')',1),(0,o.createElementVNode)('strong',null,'x'+(0,o.toDisplayString)(e.数量),1)]))),128))]))])):(0,o.createCommentVNode)('v-if',!0)])):'recent'===(0,o.unref)(n)?((0,o.openBlock)(),(0,o.createElementBlock)('section',ht,[(0,o.createElementVNode)('article',null,[t[63]||(t[63]=(0,o.createElementVNode)('h3',null,'近期事务',-1)),(0,o.unref)(u()).isEmpty((0,o.unref)(r).世界.近期事务)?((0,o.openBlock)(),(0,o.createElementBlock)('p',_t,'无')):((0,o.openBlock)(),(0,o.createElementBlock)('ul',Ct,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(r).世界.近期事务,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:t},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(t),1),(0,o.createElementVNode)('strong',null,(0,o.toDisplayString)(e),1)]))),128))]))]),(0,o.createElementVNode)('article',null,[t[64]||(t[64]=(0,o.createElementVNode)('h3',null,'战场日志',-1)),(0,o.unref)(u()).isEmpty((0,o.unref)(r).战场日志)?((0,o.openBlock)(),(0,o.createElementBlock)('p',wt,'无')):((0,o.openBlock)(),(0,o.createElementBlock)('ul',jt,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(r).战场日志,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:t},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(t),1),(0,o.createElementVNode)('strong',null,(0,o.toDisplayString)(e),1)]))),128))]))])])):((0,o.openBlock)(),(0,o.createElementBlock)('section',qt,[(0,o.createElementVNode)('div',xt,[(0,o.createElementVNode)('article',null,[t[65]||(t[65]=(0,o.createElementVNode)('h3',null,'仓库总览',-1)),(0,o.createElementVNode)('p',null,'联合币：'+(0,o.toDisplayString)((0,o.unref)(r).战利品.仓库.联合币),1),(0,o.createElementVNode)('p',null,'芯片：'+(0,o.toDisplayString)((0,o.unref)(r).战利品.仓库.芯片),1),(0,o.createElementVNode)('p',null,'独特收藏品：'+(0,o.toDisplayString)((0,o.unref)(r).战利品.仓库.独特收藏品.length),1)]),(0,o.createElementVNode)('article',null,[t[66]||(t[66]=(0,o.createElementVNode)('h3',null,'副本状态',-1)),(0,o.unref)(r).战利品.副本.已激活?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createElementVNode)('p',null,(0,o.toDisplayString)((0,o.unref)(r).战利品.副本.副本名称)+' / '+(0,o.toDisplayString)((0,o.unref)(r).战利品.副本.实验室等级),1),(0,o.createElementVNode)('p',null,'规模：'+(0,o.toDisplayString)((0,o.unref)(r).战利品.副本.地图规模)+'（'+(0,o.toDisplayString)((0,o.unref)(r).战利品.副本.房间总数)+'房）',1),(0,o.createElementVNode)('p',null,'探索：'+(0,o.toDisplayString)((0,o.unref)(r).战利品.副本.已探索房间)+'/'+(0,o.toDisplayString)((0,o.unref)(r).战利品.副本.房间总数),1),(0,o.createElementVNode)('p',null,'当前房间：'+(0,o.toDisplayString)((0,o.unref)(r).战利品.副本.最近房间||'未知'),1)],64)):((0,o.openBlock)(),(0,o.createElementBlock)('p',Ot,'当前未在副本内'))])]),(0,o.createElementVNode)('article',null,[t[67]||(t[67]=(0,o.createElementVNode)('h3',null,'物品列表',-1)),0===(0,o.unref)(f).length?((0,o.openBlock)(),(0,o.createElementBlock)('p',Ft,'暂无物品')):((0,o.openBlock)(),(0,o.createElementBlock)('ul',Mt,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(f),e=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:e.name},[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.name)+'（'+(0,o.toDisplayString)(e.quality)+'）',1),(0,o.createElementVNode)('strong',null,'x'+(0,o.toDisplayString)(e.count)+' / '+(0,o.toDisplayString)(e.category)+' / '+(0,o.toDisplayString)(e.value)+'联合币',1)]))),128))]))])])),(0,o.createElementVNode)('section',Pt,[(0,o.createElementVNode)('button',{type:'button',class:'module-toggle',onClick:t[23]||(t[23]=e=>fr('在场角色'))},' 当前在场角色（'+(0,o.toDisplayString)((0,o.unref)(c).length)+'）'+(0,o.toDisplayString)((0,o.unref)(i)?'展开':'折叠'),1),(0,o.unref)(i)?(0,o.createCommentVNode)('v-if',!0):((0,o.openBlock)(),(0,o.createElementBlock)('ul',$t,[0===(0,o.unref)(c).length?((0,o.openBlock)(),(0,o.createElementBlock)('li',At,'暂无在场角色数据')):(0,o.createCommentVNode)('v-if',!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(c),e=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:e.姓名},[(0,o.createElementVNode)('div',It,[(0,o.createElementVNode)('strong',null,(0,o.toDisplayString)(e.姓名),1),(0,o.createElementVNode)('span',null,'好感度 '+(0,o.toDisplayString)(e.好感度),1),(0,o.createElementVNode)('span',null,'态度 '+(0,o.toDisplayString)(e.态度),1)]),(0,o.createElementVNode)('p',Lt,(0,o.toDisplayString)(pr(e.基础属性)),1),(0,o.createElementVNode)('details',null,[t[68]||(t[68]=(0,o.createElementVNode)('summary',null,'内心想法（隐藏，点击查看）',-1)),(0,o.createElementVNode)('p',Xt,(0,o.toDisplayString)(e.内心想法||'暂无'),1)])]))),128))]))]),(0,o.createElementVNode)('section',Tt,[(0,o.createElementVNode)('button',{type:'button',class:'module-toggle',onClick:t[24]||(t[24]=e=>fr('长期NPC'))},' 长期NPC列表（'+(0,o.toDisplayString)((0,o.unref)(p).length)+'）'+(0,o.toDisplayString)((0,o.unref)(m)?'展开':'折叠'),1),(0,o.unref)(m)?(0,o.createCommentVNode)('v-if',!0):((0,o.openBlock)(),(0,o.createElementBlock)('ul',Ut,[0===(0,o.unref)(p).length?((0,o.openBlock)(),(0,o.createElementBlock)('li',Rt,'暂无长期NPC数据')):(0,o.createCommentVNode)('v-if',!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(p),e=>((0,o.openBlock)(),(0,o.createElementBlock)('li',{key:e.姓名},[(0,o.createElementVNode)('div',Jt,[(0,o.createElementVNode)('strong',null,(0,o.toDisplayString)(e.姓名),1),(0,o.createElementVNode)('span',null,'好感度 '+(0,o.toDisplayString)(e.好感度),1),(0,o.createElementVNode)('span',null,'阶段 '+(0,o.toDisplayString)(e.好感阶段),1),(0,o.createElementVNode)('span',null,'态度 '+(0,o.toDisplayString)(e.态度),1)]),(0,o.createElementVNode)('p',Wt,(0,o.toDisplayString)(pr(e.基础属性)),1),(0,o.createElementVNode)('p',Gt,'关系标签：'+(0,o.toDisplayString)((e.关系标签||[]).join(' / ')||'无'),1),(0,o.createElementVNode)('p',Ht,'性行为次数：'+(0,o.toDisplayString)(e.性行为次数)+' | 贞洁状态：'+(0,o.toDisplayString)(e.贞洁状态),1),(0,o.createElementVNode)('details',null,[t[69]||(t[69]=(0,o.createElementVNode)('summary',null,'内心想法（隐藏，点击查看）',-1)),(0,o.createElementVNode)('p',Yt,(0,o.toDisplayString)(e.内心想法||'暂无'),1)])]))),128))]))])],64))],2))}});const Qt=(0,a(667).A)(Kt,[['__scopeId','data-v-51ae41fc']]);$(()=>{errorCatched(async()=>{await waitGlobalInitialized('Mvu'),await e(()=>_.has(getVariables({type:'message'}),'stat_data')),(0,o.createApp)(Qt).use(t()).mount('#app')})()});
//# sourceMappingURL=index.js.map</script><style>.card[data-v-51ae41fc]{width:100%;max-width:940px;margin:0 auto;border:2px solid var(--c-line);border-radius:14px;background:var(--c-panel);box-shadow:0 18px 44px rgba(16,25,30,0.16);overflow:hidden}.card.fullscreen[data-v-51ae41fc]{position:fixed;inset:0;z-index:99999;width:100vw;max-width:none;margin:0;border-width:0;box-shadow:none;border-radius:0;overflow-y:auto}.create-flow[data-v-51ae41fc]{padding:16px;background:radial-gradient(circle at 12% 10%,#fff6e9 0%,#fffdf8 42%,#f8ede3 100%)}.cover-panel[data-v-51ae41fc]{min-height:360px;display:grid;place-items:center;align-content:center;gap:18px;border:1px solid #9d7f61;border-radius:14px;background:linear-gradient(150deg,#fff9ee 0%,#f3ddca 55%,#ead2bf 100%)}.logo[data-v-51ae41fc]{font-size:clamp(44px,8vw,92px);line-height:1;letter-spacing:8px;color:#7c2610;text-shadow:0 2px 0 #ffdcb8,0 6px 16px rgba(90,22,8,0.28)}.author[data-v-51ae41fc]{font-size:18px;color:#5f4332}.create-panel[data-v-51ae41fc]{display:grid;gap:12px;padding:16px;border:1px solid #9b8c80;border-radius:12px;background:linear-gradient(165deg,#fffcf6 0%,#fff6ee 100%)}.create-panel h2[data-v-51ae41fc]{color:var(--c-accent);font-size:24px;letter-spacing:0.5px}.field[data-v-51ae41fc]{display:grid;gap:6px}.field span[data-v-51ae41fc]{font-size:13px}.field input[data-v-51ae41fc],.field select[data-v-51ae41fc]{border:1px solid #3f525c;border-radius:8px;padding:9px 10px;background:#fff;font-family:var(--font-main)}.field textarea[data-v-51ae41fc]{border:1px solid #3f525c;border-radius:8px;padding:9px 10px;background:#fff;font-family:var(--font-main);resize:vertical}.tip[data-v-51ae41fc]{font-size:12px;color:var(--c-sub)}.tip.strong[data-v-51ae41fc]{font-weight:700;color:#7c2610}.tip.profession-mark[data-v-51ae41fc]{color:#2d4653;font-weight:700}.age-tip[data-v-51ae41fc]{font-size:12px;color:var(--c-sub)}.error[data-v-51ae41fc]{color:#b00020;font-size:12px}.actions[data-v-51ae41fc]{display:flex;justify-content:space-between;gap:8px}.start-btn[data-v-51ae41fc],.secondary-btn[data-v-51ae41fc]{border-radius:999px;font-weight:700;padding:9px 16px;cursor:pointer}.start-btn[data-v-51ae41fc]{border:2px solid #7a2f18;background:linear-gradient(180deg,#d56a46 0%,#b65232 100%);color:#fffaf6}.start-btn.large[data-v-51ae41fc]{font-size:16px;padding:10px 28px}.cheat-btn[data-v-51ae41fc]{border:1px solid #b03333;background:#fff1f1;color:#b00020;border-radius:999px;padding:8px 18px;font-weight:700;cursor:pointer}.cheat-btn.active[data-v-51ae41fc]{background:#b00020;color:#fff}.secondary-btn[data-v-51ae41fc]{border:1px solid #55646d;background:#fff;color:#2f4048}.allocate-list[data-v-51ae41fc],.ability-list[data-v-51ae41fc],.skill-list[data-v-51ae41fc],.dice-rule-list[data-v-51ae41fc],.dice-result-list[data-v-51ae41fc]{list-style:none;display:grid;gap:6px}.allocate-list li[data-v-51ae41fc],.ability-list li[data-v-51ae41fc],.skill-list li[data-v-51ae41fc],.dice-rule-list li[data-v-51ae41fc],.dice-result-list li[data-v-51ae41fc]{display:flex;justify-content:space-between;align-items:center;gap:8px;border-bottom:1px dashed #cdd6dc;padding-bottom:4px}.ability-btn[data-v-51ae41fc]{width:100%;text-align:left;border:1px solid #6d7d86;border-radius:10px;padding:10px;background:#fff;cursor:pointer;display:grid;gap:4px}.ability-btn.active[data-v-51ae41fc]{border-color:#7a2f18;background:#fff1e8}.ability-btn span[data-v-51ae41fc]{font-weight:700}.ability-btn small[data-v-51ae41fc]{color:#5f7079}.ability-source[data-v-51ae41fc]{color:#7a4b33;font-size:11px}.example-box[data-v-51ae41fc]{margin:0;white-space:pre-wrap;border:1px dashed #b58e71;border-radius:8px;padding:8px;background:#fff8f0;font-size:12px;color:#5a473b}.counter[data-v-51ae41fc]{display:flex;gap:8px;align-items:center}.counter button[data-v-51ae41fc]{width:24px;height:24px;border:1px solid #55646d;border-radius:50%;background:#fff;cursor:pointer}.mvu-textbox[data-v-51ae41fc]{padding:12px;border-bottom:1px dashed #7d8a90;background:#fffef8}.onstage-box[data-v-51ae41fc]{padding:12px;border-bottom:1px dashed #7d8a90;background:#f9fbff}.onstage-box.in-panel[data-v-51ae41fc]{border:1px solid #6f7d85;border-radius:10px;background:#f7fbff}.onstage-box h2[data-v-51ae41fc]{font-size:14px;margin-bottom:6px;color:var(--c-accent)}.module-toggle[data-v-51ae41fc]{width:100%;text-align:left;border:1px solid #53626a;border-radius:8px;background:#ffffff;color:#2d3f49;font-weight:700;padding:8px 10px;cursor:pointer;margin-bottom:8px}.module-toggle[data-v-51ae41fc]:hover{background:#edf4f9}.onstage-list[data-v-51ae41fc]{list-style:none;display:grid;gap:8px}.onstage-list li[data-v-51ae41fc]{border:1px solid #5f6e77;border-radius:8px;padding:8px;background:#fff}.onstage-list li.empty-tip[data-v-51ae41fc]{border-style:dashed;color:#5e6f79;text-align:center;background:#fbfdff}.onstage-head[data-v-51ae41fc]{display:flex;flex-wrap:wrap;gap:10px;align-items:center}.onstage-attrs[data-v-51ae41fc]{margin:6px 0;font-size:12px;color:#4e5d66}.onstage-thought[data-v-51ae41fc]{margin:6px 0 0;font-size:12px;line-height:1.5}.mvu-textbox h2[data-v-51ae41fc]{font-size:14px;margin-bottom:6px;color:var(--c-accent)}.mvu-body[data-v-51ae41fc]{margin:0;white-space:pre-wrap;word-break:break-word;font-size:13px;line-height:1.55;max-height:240px;overflow:auto;padding:10px;border:1px solid #4f5d64;border-radius:8px;background:#ffffff}.gameover-banner[data-v-51ae41fc]{padding:12px;border-bottom:1px solid #8d1c1c;background:linear-gradient(120deg,#ffe6e6 0%,#ffd2d2 100%)}.gameover-banner h2[data-v-51ae41fc]{margin:0 0 4px;font-size:16px;color:#7a1010}.gameover-banner p[data-v-51ae41fc]{margin:0;font-size:13px;color:#6a1a1a}.hero[data-v-51ae41fc]{display:flex;justify-content:space-between;gap:10px;align-items:center;padding:12px 14px;background:linear-gradient(130deg,#fffaf3 0%,#f2dfd5 100%);border-bottom:1px solid #75838c}.hero-controls[data-v-51ae41fc]{display:flex;align-items:center;gap:8px}.hero h1[data-v-51ae41fc]{font-size:26px}.hero p[data-v-51ae41fc]{font-size:13px;color:var(--c-sub)}.threat[data-v-51ae41fc]{border:1px solid var(--c-accent);border-radius:999px;padding:4px 8px;color:var(--c-accent);font-weight:700;background:#fff6f2}.fullscreen-btn[data-v-51ae41fc],.toggle-btn[data-v-51ae41fc],.tabs button[data-v-51ae41fc]{border:1px solid var(--c-line);border-radius:999px;background:#fff;color:var(--c-line);padding:5px 10px;font-size:12px;cursor:pointer;transition:all 0.18s ease}.fullscreen-btn[data-v-51ae41fc]:hover,.toggle-btn[data-v-51ae41fc]:hover,.tabs button[data-v-51ae41fc]:hover{background:var(--c-accent-soft)}.world[data-v-51ae41fc]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:8px;padding:10px 12px;border-bottom:1px dashed var(--c-line)}.tabs[data-v-51ae41fc]{display:flex;gap:8px;padding:10px 12px;border-bottom:1px dashed var(--c-line)}.tabs button.active[data-v-51ae41fc]{background:var(--c-accent);color:#fff;border-color:var(--c-accent)}.panel[data-v-51ae41fc]{padding:10px 12px 14px;display:grid;gap:10px}.bars[data-v-51ae41fc]{display:grid;gap:8px}.bar[data-v-51ae41fc]{display:grid;grid-template-columns:48px 1fr;align-items:center;gap:8px}progress[data-v-51ae41fc]{width:100%;height:12px}.grid[data-v-51ae41fc]{display:grid;gap:10px}.grid.two[data-v-51ae41fc]{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}article[data-v-51ae41fc],.loot[data-v-51ae41fc]{border:1px solid #6f7d85;border-radius:10px;padding:10px;background:#fffefa}article h3[data-v-51ae41fc],.loot h3[data-v-51ae41fc]{font-size:14px;margin-bottom:6px;color:var(--c-accent)}.big[data-v-51ae41fc]{font-size:24px;font-weight:700;margin-bottom:4px}.kv[data-v-51ae41fc]{list-style:none;display:grid;gap:4px}.kv li[data-v-51ae41fc]{display:flex;justify-content:space-between;gap:12px;border-bottom:1px dashed #ccd5d9;padding-bottom:2px}.kv li strong[data-v-51ae41fc]{text-align:right}.air-menu[data-v-51ae41fc]{border:1px solid #7f8d95;border-radius:10px;padding:10px;background:linear-gradient(180deg,#f8fcff 0%,#eef6fb 100%)}.air-controls[data-v-51ae41fc]{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:8px;margin:8px 0}.field.mini span[data-v-51ae41fc]{font-size:11px}.field.mini select[data-v-51ae41fc]{padding:6px 8px;font-size:12px}.air-actions[data-v-51ae41fc]{display:flex;flex-wrap:wrap;gap:6px;margin:8px 0}.toggle-btn.danger[data-v-51ae41fc]{color:#7d0f0f;border-color:#a23333;background:#ffecec}@media (max-width:560px){.hero[data-v-51ae41fc]{align-items:flex-start;flex-direction:column}.tabs[data-v-51ae41fc]{flex-wrap:wrap}}

:root{--c-bg:#f6f3ea;--c-panel:#fffdf8;--c-line:#25333a;--c-sub:#5d666e;--c-accent:#b65232;--c-accent-soft:#f1d9cf;--font-main:'LXGW WenKai','Noto Serif SC','Source Han Serif SC','Microsoft YaHei',serif}*{box-sizing:border-box;margin:0;padding:0}body{width:100%;background:radial-gradient(circle at top right,#fff8f1 0%,var(--c-bg) 65%);color:var(--c-line);font-family:var(--font-main);line-height:1.55}


/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>